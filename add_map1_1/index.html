<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rider</title>
    <link rel="stylesheet" href="./index.css"/>

    <link href="src/AnimatedSearchBox.css" rel="stylesheet">
    <script src="src/AnimatedSearchBox.js"></script>


    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

</head>
<body >
    <div class="title_div">
    <center>
        <div class="search">
            <input id="input" type="text" placeholder="검색어 입력" >
            <div class="searchmark" onclick="button_event2(this.value)">검색</div>
            <div class="searchmark" onclick="location.reload()">초기화</div>
        
        </div>  

        <div class="menu_section">
            <div class="btn_curr" onclick="location.href=('index.html')">지도</div>
            <div class="btn_non" onclick="location.href=('record.html')">라이딩 기록</div>
        </div>

        <div style="height:7vh;"></div>


        <div id="map" >
            
        </div>
    

        <div class="bottom">
            <div style="width:33.33vw;height:10vh; color:white; background-color: #09aa5a; float:left; line-height: 10vh;">
                0 km
            </div>
            
            <div style="width:33.33vw;height:10vh; color:white; background-color: #1F53FF; float:left; line-height:10vh;">
                0 km/h
            </div>
            
            <div style="width:33.33vw;height:10vh; color:white; background-color: #ba1016; float:left; line-height: 10vh;;">
                0 kcal
            </div>

        </div>
    
        
    
    </center>   
        
        


    </div>

</body>
</html>






<script>
var geojsonFeature = {
    "type": "Feature",
    "properties": {
        "name": "Coors Field",
        "amenity": "Baseball Stadium",
        "popupContent": "This is where the Rockies play!"
    },
    "geometry": {
        "type": "Point",
        "coordinates": [36.321771, 127.369366]
    }
};


var map = L.map('map').setView([36.321771, 127.369366], 16);
L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);
//var marker = L.marker([36.321771, 127.369366]).addTo(map);







var loc = [];
count = 0;

function onMapClick(e) {
    var marker = L.marker(e.latlng).addTo(map);
    if(count==0){
        
        loc.push([e.latlng.lat,e.latlng.lng]);
        alert(loc)
        count = 1;
    }
    else if(count==1){
        loc.push([e.latlng.lat,e.latlng.lng]);
        alert(loc)

        //var dest_layer = L.geoJSON().addTo(map);
        //dest_layer.addData(geojsonFeature);
        

        var myLines = [{
            "type": "LineString",
            "coordinates": [[loc[0][0],loc[0][1]], [loc[1][0],loc[1][1]]]
        }];
        
        


        var myStyle = {
            "color": "#FF4D27",
            "weight": 5,
            "opacity": 1
        };
        
        L.geoJSON(geojsonFeature).addTo(map);

        L.geoJSON(myLines,{style:myStyle}).addTo(map);
        loc=[];
        count = 0;
    }
    //alert("You clicked the map at " + e.latlng);
    
}
map.on('click', onMapClick);














function button_event2(value){
    v = document.getElementById('input').value;

}


    function button_event(value){
        v = document.getElementById('input').value;
         if(v=="sp"){
             if (confirm("검색된 경로에 사람들이 피해 간 지점이 포함되어 있습니다. 다른 경로를 추천해 드릴까요?") == true){    //확인
                document.getElementById("img").src = "./img/path_sp1.png"
             }else{   //취소
                document.getElementById("img").src = "./img/path_sp2.png"
             }
         }
         else if(v==("a")){
            if (confirm("검색된 경로에 사람들이 피해 간 지점이 포함되어 있습니다. 다른 경로를 추천해 드릴까요?") == true){    //확인
                 document.getElementById("img").src = "/img/sp_1.png"
             }else{   //취소
                document.getElementById("img").src = "/img/sp_2.png"
             }
         }
         else if(v==("경남")){
            document.getElementById("img").src = "/img/basic.png"
         }
         else{
            alert("해당 장소를 찾지 못하였습니다.(목업 버전일 경우 'sp'를 검색해 보세요)")
         }
        

        
      
    }

</script>